<div class="container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Ajouter une Évaluation</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="evaluationForm" (ngSubmit)="onSubmit()">

        <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>Titre*</mat-label>
            <input matInput formControlName="title" required>
            <mat-error *ngIf="evaluationForm.controls['title'].hasError('required')">Titre est obligatoire.</mat-error>
          </mat-form-field>

          <mat-form-field class="form-field">
            <mat-label>Description*</mat-label>
            <textarea matInput formControlName="description" required matTextareaAutosize matAutosizeMinRows="3" matAutosizeMaxRows="5"></textarea>
            <mat-error *ngIf="evaluationForm.controls['description'].hasError('required')">Description est obligatoire.</mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>Type d'Évolution*</mat-label>
            <mat-select formControlName="typeEvaluation">
              <mat-option *ngFor="let type of evolutionTypes" [value]="type.value">{{ type.label }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill" class="form-field">
            <mat-label>Catégorie</mat-label>
            <mat-select formControlName="categorie">
              <mat-option value="MATH">Math</mat-option>
              <mat-option value="INFORMATIQUE">Informatique</mat-option>
              <mat-option value="HISTOIRE">Histoire</mat-option>
              <mat-option value="SCEANCE">Science</mat-option>
            </mat-select>
          </mat-form-field>

          <!-- Champs Date de début et Date de fin modifiés pour utiliser datetime-local -->
          <mat-form-field class="form-field">
            <mat-label>Date et heure de début*</mat-label>
            <input matInput type="datetime-local" formControlName="startDate" required>
          </mat-form-field>

          <mat-form-field class="form-field">
            <mat-label>Date et heure de fin</mat-label>
            <input matInput type="datetime-local" formControlName="endDate">
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>Durée</mat-label>
            <input matInput formControlName="duration">
          </mat-form-field>
        </div>

        <div class="form-row status-row">
          <mat-label class="status-label">Statut</mat-label>
          <mat-radio-group aria-label="Statut" formControlName="statue">
            <mat-radio-button class="status-button" [value]="true">Ouvert</mat-radio-button>
            <mat-radio-button class="status-button" [value]="false">Fermé</mat-radio-button>
          </mat-radio-group>
        </div>

        <button mat-raised-button type="submit" class="submit-button" [disabled]="evaluationForm.invalid">
          <mat-icon>add</mat-icon> Ajouter
        </button>
      </form>
    </mat-card-content>
  </mat-card>
</div>
